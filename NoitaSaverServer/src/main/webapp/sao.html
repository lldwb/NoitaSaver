<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="layui/css/layui.css">
    <link rel="stylesheet" href="css/global.css">
    <link rel="stylesheet" href="css/admin.css">
    <script src="layui/layui.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/vue.js"></script>
    <script src="js/jquery.min.js"></script>
</head>
<body style="padding-bottom: 55px">
<!--搜索表单-->
<form class="layui-form">
    <div class="layui-inline">
        <input type="text" name="productName" id="search_productName" style="width: 200px;"  placeholder="请输入用户名" autocomplete="off" class="layui-input">
    </div>

    <div class="layui-inline">
        <input type="button" id="selectBtn" class="layui-btn" data-type="reload" value="查询">
    </div>
</form>

<!--动态表格-->
<table border="1" width="80%" align="center" class="layui-table" id="table" lay-filter="table">
</table>

<!-- 工具条 -->
<script type="text/html" id="optionBar">
    <a class="layui-btn layui-btn-danger layui-btn-xs" lay-event="off">删除</a>
    <a class="layui-btn layui-btn-normal layui-btn-xs" lay-event="show">修改</a>
</script>

<!--修改表单-->
<div id="updateContainer" style="display: none">
    <form class="layui-form" id="updateForm" lay-filter="example" style="margin: 1rem">

        <div class="layui-form-item">
            <label class="layui-form-label">密码</label>
            <div class="layui-input-block">
                <input type="text" id="update-productName" name="userPassword"
                       autocomplete="off" class="layui-input" />
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">邮箱</label>
            <div class="layui-input-block">
                <input type="text" id="update-productPrice" name="userMail"
                       autocomplete="off" class="layui-input" />
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">状态</label>
            <div class="layui-input-block">
                <input type="text" id="update-productCount" name="productCount"
                       autocomplete="off" class="layui-input" />
            </div>
        </div>
    </form>
</div>
</body>
</html>
<script>
    // 使用 layui 相关的模块
    layui.use(['jquery', 'table', 'layer', 'form','upload'], function () {

        // 获取 LayUI 各模块的实例对象
        let $ = layui.jquery;
        let table = layui.table;
        let layer = layui.layer;
        let form = layui.form;
        let upload = layui.upload;

        // 动态加载数据，回显到页面中（渲染数据）
        table.render({
            // 绑定表格 - table标签的id属性
            elem: '#table'
            , id: 'tableReload'
            // 动态加载数据的后台 Servlet 地址
            , url: 'SelServlet'
            , title: '用户列表'
            // 定义表格各列
            , cols: [[
                {field: 'userId', title: '编号', width: '10%'}
                , {field: 'userName', title: '用户名', width: '15%'}
                , {field: 'userMail', title: '邮箱', width: '10%'}
                , {field: 'userState', title: '状态', width: '8%'}
                , {field: 'userKey', title: '秘钥', width: '15%'}
            ]]
        });

        // 查询并重新加载表格 let 变量 = {属性：值,行为：方法}
        // 调用方法一：active.reload
        // 调用方法二：active[xxx]
        let active = {
            // 属性（行为）：重新根据条件查询渲染表格的数据
            reload: function () {
                // 执行重载 - 重新发起请求，并传递相关条件
                table.reload('tableReload', {
                     where: {
                        productName: $('#search_productName').val()
                    }
                });
            }
        };
    })
</script>